!function(e,t){"function"==typeof define&&define.amd?define([],t.bind(this,e,e.videojs)):"undefined"!=typeof module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(e,t){"use strict";e.videojs_pic2pic={version:"0.3"};t.registerPlugin("pic2pic",function(s){function n(e,t){try{var s=e.className;-1==s.indexOf(t)&&(e.className=s+" "+t)}catch(e){}}function i(e,t){try{e.className;try{e.className=e.className.replace(" "+t,"")}catch(e){}try{e.className=e.className.replace(t,"")}catch(e){}}catch(e){}}function o(e,t){t||(t=document);try{if(document.getElementsByClassName)return t.getElementsByClassName(e)[0];for(var s,n=t.getElementsByTagName("*"),i=n.length,o=[],d=0;d<i;d+=1)-1!==(s=n[d]).className.search(e)&&o.push(s);return o[0]}catch(e){}return!1}var d=this,a=d.el(),r=(document,{closeallow:!0,setting:!1,resolution:!1,logo:!1,audio:!1,subs:!1,desc:!1,chapters:!1,grid:!1,mirror:!1,share:!1,slide:!1,mute:!1,theater:!1,aspect:.5635,playback:!1,container:"block"});try{a.offsetHeight>0&&a.offsetWidth>0&&(r.aspect=a.offsetHeight/a.offsetWidth)}catch(e){}var l,c,v=t.mergeOptions||t.util.mergeOptions;s=v(r,s||{});var h=".vjs-pic2pic {z-index:999998;cursor:pointer;position:fixed!important;max-width:360px!important;width:60%!important;padding:0!important;bottom:1%!important;right:0!important;}";return h+=".vjs-global-close{background:linear-gradient(0deg, transparent,rgba(0, 0, 0, .8));color:#fff;position:absolute;top:0;left:0;padding:5px;text-align:right;width:100%;z-index:10001;font-size:32px;padding-right:10px;padding-top:0;font-family:sans-serif,Arial;line-height:normal;font-weight:bold;}",h+=".vjs-global-close span {cursor:pointer}",h+=".vjs-p2p-back {float:left;font-size:44px;padding:0 0 0 5px;margin-top:-6px;}",function(e){var t=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=e:s.appendChild(document.createTextNode(e)),t.appendChild(s)}(h+="@media only screen and (max-width: 460px) {.vjs-global-close{font-size:24px}.vjs-p2p-back{font-size:34px}}"),this.on("ready",function(){function t(){a.setAttribute("style",x),s.mute&&(d.volume(s.def_volume),d.muted(s.def_muted)),i(a,"vjs-pic2pic"),i(o("vjs-control-bar",a),"vjs-hidden"),i(o("vjs-big-play-button",a),"vjs-hidden"),i(o("vjs-info",a),"vjs-abs-hidden"),s.logo&&i(o("vjs-logo",a),"vjs-hidden"),s.settings&&i(o("vjs-cog-menu-button",a),"vjs-hidden"),s.resolution&&i(o("vjs-quality-button",a),"vjs-hidden"),s.theater&&i(o("vjs-mode-control",a),"vjs-hidden"),s.audio&&i(o("vjs-audio-button",a),"vjs-hidden"),s.subs&&i(o("vjs-subs-caps-button",a),"vjs-hidden"),s.desc&&i(o("vjs-descriptions-button",a),"vjs-hidden"),s.chapters&&i(o("vjs-chapters-button",a),"vjs-hidden"),s.slide&&i(o("vjs-progress-slide",a),"vjs-hidden"),s.mirror&&i(o("vjs-mirror-button",a),"vjs-hidden"),e.addEventListener?(e.removeEventListener("resize",r),s.closeallow&&c.removeEventListener("click",h),l.removeEventListener("click",v)):e.detachEvent&&(e.detachEvent("onresize",r),s.closeallow&&c.detachEvent("onclick",p2p_click),l.detachEvent("onclick",v)),u.remove()}function r(){if(1==s.playback&&j){var e=jQuery(a).width()*s.aspect;a.style.height=e+"px"}}function v(){j&&(j=!1,t(),e.scrollTo(E,b))}function h(){j&&(j=!1,t(),e.addEventListener?e.removeEventListener("scroll",p):e.detachEvent&&e.detachEvent("scroll",p),e.scrollTo(E,b))}function p(){1==s.playback&&(e.scrollY>=g?function(){if(!j){var t;s.def_volume=d.volume(),s.def_muted=d.muted(),s.mute&&d.muted(!0),o("vjs-logo",a)&&(s.logo=!0,n(o("vjs-logo",a),"vjs-hidden")),o("vjs-cog-menu-button",a)&&(s.settings=!0,n(o("vjs-cog-menu-button",a),"vjs-hidden")),o("vjs-quality-button",a)&&(s.resolution=!0,n(o("vjs-quality-button",a),"vjs-hidden")),o("vjs-mode-control",a)&&(s.theater=!0,n(o("vjs-mode-control",a),"vjs-hidden")),o("vjs-mirror-button",a)&&(s.theater=!0,n(o("vjs-mirror-button",a),"vjs-hidden")),(t=o("vjs-audio-button",a))&&-1===t.className.indexOf("vjs-hidden")&&(s.audio=!0,n(t,"vjs-hidden")),(t=o("vjs-chapters-button",a))&&-1===t.className.indexOf("vjs-hidden")&&(s.audio=!0,n(t,"vjs-hidden")),(t=o("vjs-descriptions-button",a))&&-1===t.className.indexOf("vjs-hidden")&&(s.audio=!0,n(t,"vjs-hidden")),o("vjs-progress-slide",a)&&n(o("vjs-progress-slide",a),"vjs-hidden"),o("vjs-info",a)&&n(o("vjs-info",a),"vjs-abs-hidden");var p=o("vjs-grid",a);if(p){var m=p.className;-1==m.indexOf("vjs-hidden")&&(n(p,"vjs-hidden"),i(o("vjs-control-bar",a),"vjs-hidden"),i(o("vjs-big-play-button",a),"vjs-hidden"))}var f=o("vjs-sharing-overlay",a);if(f){var g=f.className;-1==g.indexOf("vjs-hidden")&&(n(f,"vjs-hidden"),i(o("vjs-control-bar",a),"vjs-hidden"),i(o("vjs-big-play-button",a),"vjs-hidden"))}var b=a.className;b.indexOf("vjs-has-started")>0&&n(o("vjs-big-play-button",a),"vjs-hidden"),n(a,"vjs-pic2pic");var y=jQuery(a).width()*s.aspect;a.style.height=y+"px",(u=document.createElement("div")).className="vjs-global-close",(l=document.createElement("span")).innerHTML="&laquo;",l.className="vjs-p2p-back",u.appendChild(l),l.setAttribute("title","Back to video"),s.closeallow&&((c=document.createElement("span")).innerHTML="x",u.appendChild(c)),a.appendChild(u),l[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",v,!1),s.closeallow&&c[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"click":"onclick",h,!1),e[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"resize":"onresize",r,!1),j=!0}}():j&&e.scrollY<=y&&(j=!1,t()))}this.on("playing",function(){s.playback=!0});var u,j=!1,m=a.getBoundingClientRect(),f=m.bottom-m.top,g=m.top+e.scrollY+.9*f,b=m.top+e.scrollY,y=g;"inline"==s.container&&(y=m.top+e.scrollY);var E=m.left+e.scrollX;b<0&&(b=0),m.top,e.scrollY;var x="";try{x=a.getAttribute("style")}catch(e){}""!=x&&(x="visibility:visible;"+x),e[e.addEventListener?"addEventListener":"attachEvent"](e.addEventListener?"scroll":"onscroll",p,!1)}),this})});